(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-09a7"],{KHf9:function(t,e,i){"use strict";i.r(e);var a=i("X3IP"),l=i("t3Un");var o={data:function(){return{list:"",listLoading:!0,dialogVisible:!1,form:{title:"",url:"",sort:"",img:""},formLabelWidth:"80px",id:""}},created:function(){this.getList()},methods:{fileChange:function(t){var e=t.target.files[0];if(!/image\/jpeg|image\/png|image\/jpg/.test(e.type))return Object(a.Message)({message:"不支持的图片格式",type:"error",duration:1e3}),void(this.$refs.file.value="");if(e.size/1024>2048)return Object(a.Message)({message:"图片过大不支持上传",type:"error",duration:1e3}),void(this.$refs.file.value="");var i=new FormData;i.append("files[]",e),this.form.img=i,console.log(e)},add:function(){var t=this;(function(t){return console.log(t),Object(l.a)({url:"/api/admin/discovery/storeSlideShow",method:"post",data:t})})({title:this.form.title,url:this.form.url,order:this.form.sort,image:this.form.img}).then(function(e){t.$data.dialogVisible=!1,e.status?(Object(a.Message)({message:e.result,type:"success",duration:1e3}),t.getList()):Object(a.Message)({message:e.errMessage,type:"error",duration:1e3})})},getList:function(){var t=this;(function(t){return Object(l.a)({url:"/api/admin/discovery/showList/"+t,method:"get"})})(1).then(function(e){e.status?(t.$data.list=e.result,t.$data.listLoading=!1):Object(a.Message)({message:e.errMessage,type:"error",duration:1e3})})},update:function(t){this.$data.id=t}}},s=(i("XJey"),i("KHd+")),r=Object(s.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{prop:"image",label:"图片",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:t.row.image,alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"url",label:"链接"}}),t._v(" "),i("el-table-column",{attrs:{prop:"order",label:"排序"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.update(e.row.id)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"链接地址","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"排序","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"50px"},attrs:{"auto-complete":"off"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"素材图片","label-width":t.formLabelWidth}},[i("input",{ref:"file",attrs:{type:"file",id:"upload_file",multiple:""},on:{change:function(e){t.fileChange(e)}}})])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="index.vue";e.default=r.exports},XJey:function(t,e,i){"use strict";var a=i("z/CX");i.n(a).a},"z/CX":function(t,e,i){}}]);